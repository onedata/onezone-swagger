post:
  operationId: request_space_membership
  tags:
    - Space
  x-onedata-gri:
    type: od_space
    id: ?BINDING(id)
    aspect: membership_request
  summary: Request space membership via Marketplace
  x-bash-codegen-description: |
    Request space membership for a space advertised in the Marketplace
    as currently authenticated user.

    This operation can be invoked on behalf of the current user only.
  description: |
    Request space membership for a space advertised in the Marketplace
    as currently authenticated user.

    This operation can be invoked on behalf of the current user only.

    ***Example cURL requests***

    **Request space membership via Marketplace**
    ```bash
    curl -u admin:password -H "Content-type: application/json" -X POST \
    -d '{ "contactEmail" : "user@example.com"}' \
    https://$ZONE_HOST/api/v3/onezone/spaces/marketplace/$SPACE_ID/request
    ```
  consumes:
    - application/json
  responses:
    '200':
      description: The request has been delivered and awaits resolution.
      schema:
        type: object
        properties:
          requestId:
            description: Unique Id of the request.
            type: string
        example:
          requestId: 97216a666edd09945880a0785ad66a7b
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Authentication error.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Authorization error.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Resource not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server Error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: id
    in: path
    description: Space Id.
    type: string
    required: true
  - name: request
    in: body
    description: Space membership request body.
    schema:
      type: object
      properties:
        contactEmail:
          type: string
          description: |
            Requester email address, which will be passed to the space maintainer for
            the purpose of processing the request and used for notifying about their decision.
            By providing the address, the user agrees to the above.
        message:
          type: string
          description: |
            A message to the maintainer stating user's motivation to join the space and/or
            any information that may help in making the decision.
      required:
        - contactEmail
      example:
        contactEmail: user@example.com
    required: true
  x-code-samples:
  - lang: Shell
    source: "onezone-rest-cli requestSpaceMembership id=$SPACE_ID contactEmail==user@example.com"
