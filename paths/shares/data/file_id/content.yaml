get:
  operationId: download_shared_file_content
  tags:
    - Share
  x-onedata-gri:
    type: od_share
    id: undefined
    aspect: "{shared_file_content, ?BINDING(file_id)}"
    scope: public
  summary: Download shared file content
  x-bash-codegen-description: |
    This endpoint can be used to download a shared file knowing its file Id,
    without any authentication. It redirects to the corresponding
    [REST endpoint](https://onedata.org/#/home/api/stable/oneprovider?anchor=operation/download_file_content)
    in one of the supporting providers. The provider is chosen dynamically and
    may change in time, so the redirection URL should not be cached.

    The shared file Id can be acquired either by fetching public share details
    (if the shared object was a file), or by listing a shared directory.

    The endpoint will return `503 Service Unavailable` when there is no suitable
    provider to handle the request and `501 Not Implemented` when all available
    providers are in versions older than `20.02.*`.
  description: |
    This endpoint can be used to download a shared file knowing its file Id,
    without any authentication. It redirects to the corresponding
    [REST endpoint](https://onedata.org/#/home/api/stable/oneprovider?anchor=operation/download_file_content)
    in one of the supporting providers. The provider is chosen dynamically and
    may change in time, so the redirection URL should not be cached.

    The shared file Id can be acquired either by fetching public share details
    (if the shared object was a file), or by listing a shared directory.

    The endpoint will return `503 Service Unavailable` when there is no suitable
    provider to handle the request and `501 Not Implemented` when all available
    providers are in versions older than `20.02.*`.

    ***Example cURL requests***

    **Download shared file content**
    ```bash
    curl -v -X GET https://$HOST/api/v3/onezone/shares/data/$FILE_ID/content

    < HTTP/1.1 307 Temporary Redirect
    < location: https://provider.example.com/api/v3/oneprovider/data/$FILE_ID/content
    ```
  produces:
    - application/json
  responses:
    '307':
      description: >
        Redirection to one of the supporting providers in the response `Location` header.
      headers:
        Location:
          description: URL of the endpoint that can be used to download the file content.
          type: string
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Authentication error.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Authorization error.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Resource not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server Error.
      schema:
        $ref: '#/definitions/Error'
    '501':
      description: Not Implemented - all available providers are in versions older than `20.02.*`.
      schema:
        $ref: '#/definitions/Error'
    '503':
      description: Service Unavailable - there is no suitable provider to handle the request.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: file_id
    in: path
    description: Shared file Id.
    type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "onezone-rest-cli downloadSharedFileContent file_id=000000000055D4E4836803640004677569646D00"
