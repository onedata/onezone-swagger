get:
  operationId: get_space_user
  tags:
    - Space
  x-onedata-gri:
    type: od_user
    id: ?BINDING(uid)
    aspect: instance
    scope: shared
  x-onedata-auth-hint: ?THROUGH_SPACE(?BINDING(id))
  x-onedata-permissions:
    - space_view
    - oz_spaces_list_users
  summary: Get space user details
  x-bash-codegen-description: |
    Returns the public information about a specific user in a space.

    This operation requires `space_view` privilege.
    For administrators who do not have to be members of this space,
    `oz_spaces_list_users` privilege is required.
  description: |
    Returns the public information about a specific user in a space.

    This operation requires `space_view` privilege.
    For administrators who do not have to be members of this space,
    `oz_spaces_list_users` privilege is required.

    ***Example cURL requests***

    **Get space user data**
    ```bash
    curl -u username:password -X GET \
    https://$HOST:8443/api/v3/onezone/spaces/9ueUeoZA6KXxNgzlvqmmrbzqE_BQiaHEEDC21sY1Kuc/users/njOzyvXybAYvki10HXRCeJd_IlLHS4XEklgghmJjDpo

    {
       "userId" : "njOzyvXybAYvki10HXRCeJd_IlLHS4XEklgghmJjDpo",
       "name" : "John Doe",
       "login" : "username"
    }
    ```
  produces:
    - application/json
  responses:
    '200':
      description: Information about a space user.
      schema:
        $ref: '#/definitions/User'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Authentication error.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Authorization error.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Resource not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server Error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: id
    in: path
    description: Space ID.
    type: string
    required: true
  - name: uid
    in: path
    description: User ID.
    type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "onezone-rest-cli getSpaceUser id=bI4QaPBog_0kCdUddUIsgAxi5I803ZirkUfdiWDd4W3 uid=lb0NvUXIVguzjQ3dBOXAyd1c61fWKB5dKJDQ6YvB7a0"


put:
  operationId: add_user_to_space
  tags:
    - Space
  x-onedata-gri:
    type: od_space
    id: ?BINDING(id)
    aspect: "{user, ?BINDING(uid)}"
  x-onedata-permissions:
    - oz_spaces_add_members
  summary: Add user to space
  x-bash-codegen-description: |
    Allows to add a user to any space.

    This operation can be invoked by system administrators only
    and requires `oz_spaces_add_members` privilege.
  description: |
    Allows to add a user to any space. Optional privileges
    can be passed in the request body, otherwise default
    privileges will be set for user in this space.

    This operation can be invoked by system administrators only
    and requires `oz_spaces_add_members` privilege.

    ***Example cURL requests***

    **Add user to space**
    ```bash
    curl -u username:password  -H "Content-type: application/json" -X PUT \
    https://$HOST:8443/api/v3/onezone/spaces/9ueUeoZA6KXxNgzlvqmmrbzqE_BQiaHEEDC21sY1Kuc/users/lb0NvUXIVguzjQ3dBOXAyd1c61fWKB5dKJDQ6YvB7a0
    ```
  consumes:
    - application/json
  responses:
    '204':
      description: The user was added to the space.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Authentication error.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Authorization error.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Resource not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server Error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: id
    in: path
    description: Space ID.
    type: string
    required: true
  - name: uid
    in: path
    description: User ID.
    type: string
    required: true
  - name: privileges
    in: body
    schema:
      $ref: '#/definitions/SpacePrivileges'
    required: false
  x-code-samples:
  - lang: Shell
    source: "onezone-rest-cli addUserToSpace id=bI4QaPBog_0kCdUddUIsgAxi5I803ZirkUfdiWDd4W3 uid=lb0NvUXIVguzjQ3dBOXAyd1c61fWKB5dKJDQ6YvB7a0"


delete:
  operationId: remove_space_user
  tags:
    - Space
  x-onedata-gri:
    type: od_space
    id: ?BINDING(id)
    aspect: "{user, ?BINDING(uid)}"
  x-onedata-permissions:
    - space_remove_user
    - oz_spaces_remove_members
  summary: Remove user from space
  x-bash-codegen-description: |
    Removes user from specific space.

    This operation requires `space_remove_user` or
    `oz_spaces_remove_members` administrator privilege.
  description: |
    Removes user from specific space.

    This operation requires `space_remove_user` or
    `oz_spaces_remove_members` administrator privilege.

    ***Example cURL requests***

    **Get space user data**
    ```bash
    curl  -u admin:password -X DELETE \
    https://$HOST:8443/api/v3/onezone/spaces/p-mts_OBjwXss-E9kBxzp-ux12KNW2CBSaXlkDowDEk/users/ivMnRLb2WYNApEmP-j3SF0NsqBgdHG7iel89FHY802w
    ```
  consumes:
    - application/json
  responses:
    '204':
      description: User will be removed from space.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '401':
      description: Authentication error.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Authorization error.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Resource not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server Error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: id
    in: path
    description: Space ID.
    type: string
    required: true
  - name: uid
    in: path
    description: User ID.
    type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "onezone-rest-cli removeSpaceUser id=bI4QaPBog_0kCdUddUIsgAxi5I803ZirkUfdiWDd4W3 uid=lb0NvUXIVguzjQ3dBOXAyd1c61fWKB5dKJDQ6YvB7a0"
